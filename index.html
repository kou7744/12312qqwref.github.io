<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            background-color: #fff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        h1 {
            color: #0056b3;
            margin-bottom: 30px;
            font-weight: 600;
        }
         /* –°—Ç–∏–ª—å –¥–ª—è —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ä–µ–∂–∏–º—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è */
        [contenteditable="true"] {
            border: 1px dashed #007bff;
            padding: 5px;
            outline: none; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Å–∏–Ω—ñ–π –∫–æ–Ω—Ç—É—Ä —Ñ–æ–∫—É—Å–∞ */
            background-color: #e9ecef;
            cursor: text;
        }

        .file-upload-container {
            border: 2px dashed #007bff;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .file-upload-container:hover {
            background-color: #e9ecef;
        }
        input[type="file"] {
            display: none;
        }
        .upload-button {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }
        .upload-button:hover {
            background-color: #0056b3;
        }
         .create-folder-button { /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–ø–∫–∏ */
             background-color: #28a745; /* –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä */
             color: white;
             padding: 12px 25px;
             border: none;
             border-radius: 5px;
             cursor: pointer;
             font-size: 1rem;
             transition: background-color 0.3s ease;
             margin-bottom: 20px;
         }
         .create-folder-button:hover {
             background-color: #218838;
         }


        .file-list {
            margin-top: 30px;
            text-align: left;
        }
        .file-list h2 {
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .file-item, .folder-item { /* –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ —Å—Ç–∏–ª—ñ –¥–æ –æ–±–æ—Ö —Ç–∏–ø—ñ–≤ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px; /* –ó–±—ñ–ª—å—à–µ–Ω–æ –≤—ñ–¥—Å—Ç—É–ø */
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            flex-direction: column; /* –†–æ–∑—Ç–∞—à–æ–≤—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
            gap: 10px; /* –î–æ–¥–∞–Ω–æ –ø—Ä–æ—Å—Ç—ñ—Ä –º—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
            align-items: flex-start; /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –ø–æ –ª—ñ–≤–æ–º—É –∫—Ä–∞—é */
        }
         .folder-item {
             background-color: #e9ecef; /* –¢—Ä–æ—Ö–∏ —ñ–Ω—à–∏–π —Ñ–æ–Ω –¥–ª—è –ø–∞–ø–æ–∫ */
             border-color: #ced4da;
         }

        .file-info, .folder-info { /* –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ —Å—Ç–∏–ª—ñ –¥–æ –æ–±–æ—Ö —Ç–∏–ø—ñ–≤ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏—Ö –±–ª–æ–∫—ñ–≤ */
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%; /* –ó–∞–π–º–∞—î –≤—Å—é —à–∏—Ä–∏–Ω—É */
            flex-wrap: wrap; /* –î–æ–∑–≤–æ–ª—è—î–º–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
        }
        .file-name-display, .folder-name-display { /* –î–æ–¥–∞–Ω–æ –∫–ª–∞—Å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞–∑–≤–∏/–ø–æ–ª—è –≤–≤–æ–¥—É */
             flex-grow: 1;
             margin-right: 10px;
             word-break: break-all;
             font-weight: 600;
             min-width: 100px; /* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —à–∏—Ä–∏–Ω–∞, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–∞–¥–º—ñ—Ä–Ω–æ–≥–æ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è */
        }
         .file-name-display span, .folder-name-display span {
             /* –°—Ç–∏–ª—ñ –¥–ª—è —Ç–µ–∫—Å—Ç—É –Ω–∞–∑–≤–∏ */
         }
         .folder-name-display span::before { /* –î–æ–¥–∞—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–∞–ø–∫–∏ */
             content: 'üìÅ '; /* –ï–º–æ–¥–∑—ñ –ø–∞–ø–∫–∏ */
             margin-right: 5px;
         }

         .file-name-display input[type="text"], .folder-name-display input[type="text"] {
            width: 100%; /* –ü–æ–ª–µ –≤–≤–æ–¥—É –∑–∞–π–º–∞—î –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É —à–∏—Ä–∏–Ω—É */
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* –í–∫–ª—é—á–∞—î–º–æ padding —Ç–∞ border —É –∑–∞–≥–∞–ª—å–Ω—É —à–∏—Ä–∏–Ω—É */
        }
        .button-group {
            display: flex;
            gap: 5px;
             flex-shrink: 0; /* –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è –≥—Ä—É–ø–∏ –∫–Ω–æ–ø–æ–∫ */
             flex-wrap: wrap; /* –î–æ–∑–≤–æ–ª—è—î–º–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ */
             justify-content: flex-end; /* –í–∏—Ä—ñ–≤–Ω—é—î–º–æ –∫–Ω–æ–ø–∫–∏ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é */
        }
         /* –°—Ç–∏–ª—ñ –¥–ª—è –≥—Ä—É–ø–∏ –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ */
         .rename-button-group {
             display: flex;
             gap: 5px;
             flex-shrink: 0;
             flex-wrap: wrap;
             justify-content: flex-end;
         }

        .edit-button, .delete-button, .save-button, .cancel-button, .download-button, .toggle-edit-button, .set-password-button, .view-image-button,
        .open-folder-button, .rename-folder-button, .delete-folder-button, .back-button { /* –î–æ–¥–∞–Ω–æ –∫–ª–∞—Å–∏ –∫–Ω–æ–ø–æ–∫ –ø–∞–ø–æ–∫ —Ç–∞ –Ω–∞–∑–∞–¥ */
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }
        .edit-button {
            background-color: #ffc107;
        }
        .edit-button:hover {
            background-color: #e0a800;
        }
        .delete-button, .delete-folder-button { /* –°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è */
            background-color: #dc3545;
        }
        .delete-button:hover, .delete-folder-button:hover {
            background-color: #c82333;
        }
        .save-button {
            background-color: #28a745;
        }
        .save-button:hover {
            background-color: #218838;
        }
        .cancel-button {
            background-color: #6c757d;
        }
        .cancel-button:hover {
            background-color: #5a6268;
        }
        .download-button {
            background-color: #17a2b8;
        }
        .download-button:hover {
            background-color: #138496;
        }
        .toggle-edit-button {
             background-color: #6f42c1; /* –ü—É—Ä–ø—É—Ä–æ–≤–∏–π –∫–æ–ª—ñ—Ä */
             margin-bottom: 20px;
        }
        .toggle-edit-button:hover {
             background-color: #563d7c;
        }
        .set-password-button {
             background-color: #ff8c00; /* –û—Ä–∞–Ω–∂–µ–≤–∏–π –∫–æ–ª—ñ—Ä */
        }
         .set-password-button:hover {
             background-color: #cc7000;
         }
         .view-image-button { /* –°—Ç–∏–ª—å –¥–ª—è –Ω–æ–≤–æ—ó –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥—É */
             background-color: #20c997; /* –ó–µ–ª–µ–Ω—É–≤–∞—Ç–æ-–±–ª–∞–∫–∏—Ç–Ω–∏–π */
         }
          .view-image-button:hover {
             background-color: #17a2b8;
          }
         .open-folder-button { /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–∞–ø–∫–∏ */
             background-color: #007bff;
         }
          .open-folder-button:hover {
             background-color: #0056b3;
          }
         .rename-folder-button { /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏ */
             background-color: #ffc107; /* –ñ–æ–≤—Ç–∏–π */
         }
          .rename-folder-button:hover {
             background-color: #e0a800;
          }
         .set-folder-password-button { /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è –Ω–∞ –ø–∞–ø–∫—É */
             background-color: #ff8c00; /* –û—Ä–∞–Ω–∂–µ–≤–∏–π –∫–æ–ª—ñ—Ä */
         }
          .set-folder-password-button:hover {
             background-color: #cc7000;
          }

         .back-button { /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–Ω–∞–∑–∞–¥" */
             background-color: #6c757d; /* –°—ñ—Ä–∏–π –∫–æ–ª—ñ—Ä */
             margin-bottom: 20px;
             display: none; /* –ü—Ä–∏—Ö–æ–≤–∞–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º */
         }
          .back-button:hover {
             background-color: #5a6268;
          }


         .password-indicator {
             margin-left: 10px;
             color: green;
             font-weight: bold;
         }


        /* –°—Ç–∏–ª—ñ –¥–ª—è –º–µ–¥—ñ–∞ —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å */
        .media-preview {
            width: 100%; /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–π–º–∞—î –≤—Å—é —à–∏—Ä–∏–Ω—É */
            max-width: 100%;
            display: flex;
            justify-content: center; /* –¶–µ–Ω—Ç—Ä—É—î–º–æ –≤–º—ñ—Å—Ç */
        }
         /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å, —è–∫—â–æ —î –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É */
         .hide-preview {
             display: none;
         }

        .media-preview audio,
        .media-preview video,
        .media-preview img {
            display: block; /* –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –º–µ–¥—ñ–∞ —è–∫ –±–ª–æ–∫–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ */
            max-width: 100%; /* –û–±–º–µ–∂—É—î–º–æ —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
            height: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∏—Å–æ—Ç–∞ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π */
            border-radius: 5px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω—ñ –∫—É—Ç–∏ */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="main-heading">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª</h1>

        <button class="toggle-edit-button" id="toggleEditButton">–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É</button>

        <div class="file-upload-container" id="drop-area">
            <input type="file" id="fileInput" multiple>
            <p id="drop-text">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Ñ–∞–π–ª–∏ —Å—é–¥–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –≤–∏–±—Ä–∞—Ç–∏</p>
        </div>

        <button class="upload-button" onclick="document.getElementById('fileInput').click()">–í–∏–±—Ä–∞—Ç–∏ —Ñ–∞–π–ª–∏</button>

         <button class="create-folder-button" id="createFolderButton">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É</button>

         <button class="back-button" id="backButton">‚Üê –ù–∞–∑–∞–¥</button>


        <div class="file-list" id="fileList">
            <h2 id="file-list-heading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏:</h2>
             </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const dropArea = document.getElementById('drop-area');
        const toggleEditButton = document.getElementById('toggleEditButton');
        const mainHeading = document.getElementById('main-heading');
        const dropText = document.getElementById('drop-text');
        const fileListHeading = document.getElementById('file-list-heading');
        const createFolderButton = document.getElementById('createFolderButton');
        const backButton = document.getElementById('backButton');


        let isEditingMode = false; // –§–ª–∞–≥ –¥–ª—è —Ä–µ–∂–∏–º—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è

        // –ï–ª–µ–º–µ–Ω—Ç–∏, —è–∫—ñ –º–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤ –∑–∞–≥–∞–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ
        const editableTextElements = [mainHeading, dropText, fileListHeading];

        // Handle file selection via input
        fileInput.addEventListener('change', handleFiles);

        // Handle drag and drop
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
            document.body.addEventListener(eventName, preventDefaults, false); // Prevent default for whole body
        });

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });

        dropArea.addEventListener('drop', handleDrop, false);

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function highlight(e) {
            dropArea.classList.add('bg-blue-100'); // Using Tailwind class for highlighting
        }

        function unhighlight(e) {
            dropArea.classList.remove('bg-blue-100');
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles({ target: { files: files } });
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É –¥–æ —Å–ø–∏—Å–∫—É (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è)
        function handleFiles(event) {
            const files = event.target.files;
            if (!files) return;

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç –±—É–¥–µ –∫–æ–¥ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                console.log('Selected file:', file.name);

                // –î–æ–¥–∞—î–º–æ —Ñ–∞–π–ª –¥–æ —Å–ø–∏—Å–∫—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó)
                const fileItem = document.createElement('div');
                fileItem.classList.add('file-item'); // –ö–ª–∞—Å –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó —è–∫ —Ñ–∞–π–ª

                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ–±'—î–∫—Ç File –∑ –µ–ª–µ–º–µ–Ω—Ç–æ–º —Å–ø–∏—Å–∫—É –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
                fileItem.file = file;
                fileItem.password = null; // –î–æ–¥–∞—î–º–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è)


                // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É —Ç–∞ –∫–Ω–æ–ø–æ–∫
                const fileInfoDiv = document.createElement('div');
                fileInfoDiv.classList.add('file-info');

                 // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É –∞–±–æ –ø–æ–ª—è –≤–≤–æ–¥—É
                const fileNameDisplay = document.createElement('div');
                fileNameDisplay.classList.add('file-name-display');

                // –°—Ç–≤–æ—Ä—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –¥–ª—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É
                const fileNameSpan = document.createElement('span');
                fileNameSpan.textContent = file.name;
                fileNameDisplay.appendChild(fileNameSpan); // –î–æ–¥–∞—î–º–æ span –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä


                const buttonGroup = document.createElement('div');
                buttonGroup.classList.add('button-group');

                const downloadButton = document.createElement('button');
                downloadButton.classList.add('download-button');
                downloadButton.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏';

                const editButton = document.createElement('button');
                editButton.classList.add('edit-button');
                editButton.textContent = '–†–µ–¥–∞–≥—É–≤–∞—Ç–∏'; // –¶—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É

                const deleteButton = document.createElement('button');
                deleteButton.classList.add('delete-button');
                deleteButton.textContent = '–í–∏–¥–∞–ª–∏—Ç–∏';

                const setPasswordButton = document.createElement('button');
                setPasswordButton.classList.add('set-password-button');
                setPasswordButton.textContent = '–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å';

                 let viewImageButton = null; // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Å–ø–æ—á–∞—Ç–∫—É null)
                 let mediaPreviewContainer = null; // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É –º–µ–¥—ñ–∞/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è


                buttonGroup.appendChild(downloadButton);
                buttonGroup.appendChild(editButton);
                buttonGroup.appendChild(deleteButton);
                buttonGroup.appendChild(setPasswordButton); // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è


                fileInfoDiv.appendChild(fileNameDisplay); // –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–∑–≤–∏/–ø–æ–ª—è –≤–≤–æ–¥—É
                fileInfoDiv.appendChild(buttonGroup); // –î–æ–¥–∞—î–º–æ –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫

                fileItem.appendChild(fileInfoDiv); // –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –Ω–∞–∑–≤–æ—é —Ç–∞ –∫–Ω–æ–ø–∫–∞–º–∏

                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç–∏–ø —Ñ–∞–π–ª—É –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ–¥—ñ–∞ –∞–±–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                if (file.type.startsWith('audio/')) {
                    mediaPreviewContainer = document.createElement('div');
                    mediaPreviewContainer.classList.add('media-preview'); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å–ø—ñ–ª—å–Ω–∏–π –∫–ª–∞—Å
                    const audioElement = document.createElement('audio');
                    audioElement.controls = true; // –î–æ–¥–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
                    audioElement.src = URL.createObjectURL(file);
                    mediaPreviewContainer.appendChild(audioElement);
                    fileItem.appendChild(mediaPreviewContainer); // –î–æ–¥–∞—î–º–æ –∞—É–¥—ñ–æ –ø–ª–µ—î—Ä
                    // URL –±—É–¥–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–æ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É –∞–±–æ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

                } else if (file.type.startsWith('video/')) {
                    mediaPreviewContainer = document.createElement('div');
                     mediaPreviewContainer.classList.add('media-preview'); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å–ø—ñ–ª—å–Ω–∏–π –∫–ª–∞—Å
                    const videoElement = document.createElement('video');
                    videoElement.controls = true; // –î–æ–¥–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
                    // videoElement.width = 300; // –ú–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä, –∞–ª–µ –∫—Ä–∞—â–µ —á–µ—Ä–µ–∑ CSS
                    videoElement.src = URL.createObjectURL(file);
                    mediaPreviewContainer.appendChild(videoElement);
                    fileItem.appendChild(mediaPreviewContainer); // –î–æ–¥–∞—î–º–æ –≤—ñ–¥–µ–æ –ø–ª–µ—î—Ä
                    // URL –±—É–¥–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–æ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É –∞–±–æ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.
                } else if (file.type.startsWith('image/')) {
                    mediaPreviewContainer = document.createElement('div'); // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É
                    mediaPreviewContainer.classList.add('media-preview'); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å–ø—ñ–ª—å–Ω–∏–π –∫–ª–∞—Å
                    mediaPreviewContainer.classList.add('hide-preview'); // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

                    const imageElement = document.createElement('img');
                    imageElement.src = URL.createObjectURL(file);
                    imageElement.alt = '–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è'; // –î–æ–¥–∞—î–º–æ alt —Ç–µ–∫—Å—Ç
                    // –°—Ç–∏–ª—ñ –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∂–µ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ CSS –ø—ñ–¥ –∫–ª–∞—Å–æ–º .media-preview img

                    mediaPreviewContainer.appendChild(imageElement);
                    fileItem.appendChild(mediaPreviewContainer); // –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

                    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏" –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
                    viewImageButton = document.createElement('button');
                    viewImageButton.classList.add('view-image-button');
                    viewImageButton.textContent = '–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏';
                    buttonGroup.appendChild(viewImageButton); // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –≤ –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫

                    // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏"
                    viewImageButton.addEventListener('click', function() {
                         console.log('View image button clicked for file:', file.name);

                         // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≥–ª—è–¥–æ–º
                         if (fileItem.password) {
                            const enteredPassword = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:');
                            if (enteredPassword !== fileItem.password) {
                                alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!');
                                console.log('Incorrect password entered for viewing.');
                                return; // –ó—É–ø–∏–Ω—è—î–º–æ –ø–µ—Ä–µ–≥–ª—è–¥, —è–∫—â–æ –ø–∞—Ä–æ–ª—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
                            }
                             console.log('Correct password entered. Proceeding with viewing.');
                         }

                         // –ü–µ—Ä–µ–º–∏–∫–∞—î–º–æ –≤–∏–¥–∏–º—ñ—Å—Ç—å –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É
                         const isHidden = mediaPreviewContainer.classList.contains('hide-preview');
                         if (isHidden) {
                             mediaPreviewContainer.classList.remove('hide-preview');
                             viewImageButton.textContent = '–°—Ö–æ–≤–∞—Ç–∏';
                              console.log('Showing image preview.');
                         } else {
                             mediaPreviewContainer.classList.add('hide-preview');
                             viewImageButton.textContent = '–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏';
                             console.log('Hiding image preview.');
                         }
                    });

                    // URL –±—É–¥–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–æ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É –∞–±–æ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.
                }


                // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                downloadButton.addEventListener('click', function() {
                    console.log('Download button clicked for file:', fileItem.file ? fileItem.file.name : 'N/A');

                    // –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                    if (fileItem.password) {
                        const enteredPassword = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É:');
                        if (enteredPassword !== fileItem.password) {
                            alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!');
                            console.log('Incorrect password entered for download.');
                            return; // –ó—É–ø–∏–Ω—è—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —è–∫—â–æ –ø–∞—Ä–æ–ª—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
                        }
                         console.log('Correct password entered. Proceeding with download.');
                    }


                    // –¶—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î –ª–∏—à–µ –¥–ª—è —Ñ–∞–π–ª—ñ–≤, –¥–æ–¥–∞–Ω–∏—Ö —É –ø–æ—Ç–æ—á–Ω—ñ–π —Å–µ—Å—ñ—ó –±—Ä–∞—É–∑–µ—Ä–∞.
                    // –î–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤, –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ, –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞ –ª–æ–≥—ñ–∫–∞.
                    if (fileItem.file) {
                        try {
                            const url = URL.createObjectURL(fileItem.file);
                            console.log('Created object URL for download:', url);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = fileItem.file.name; // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                            // –î–æ–¥–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–æ DOM, –∞–ª–µ —Ä–æ–±–∏–º–æ –π–æ–≥–æ –Ω–µ–≤–∏–¥–∏–º–∏–º
                            a.style.display = 'none';
                            document.body.appendChild(a);
                            console.log('Attempting to trigger click...');
                            a.click();
                            console.log('Click triggered.');

                            // –ó–≤—ñ–ª—å–Ω—è—î–º–æ –ø–∞–º'—è—Ç—å —Ç–∞ –≤–∏–¥–∞–ª—è—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø—ñ—Å–ª—è –Ω–µ–≤–µ–ª–∏–∫–æ—ó –∑–∞—Ç—Ä–∏–º–∫–∏
                            // –ó–±—ñ–ª—å—à–µ–Ω–æ –∑–∞—Ç—Ä–∏–º–∫—É –¥–æ 500 –º—Å
                            setTimeout(() => {
                                URL.revokeObjectURL(url);
                                console.log('Revoked object URL after download:', url);
                                document.body.removeChild(a);
                                console.log('Removed anchor element from DOM.');
                            }, 500); // –ó–±—ñ–ª—å—à–µ–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞

                            console.log('Download process initiated for file:', fileItem.file.name);
                        } catch (error) {
                            console.error('Error during download process:', error);
                            alert('–í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É.'); // –ü–æ–≤—ñ–¥–æ–º–ª—è—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
                        }
                    } else {
                        console.log('File object not available for download. Cannot initiate client-side download.');
                        // –¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ, —â–æ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                        // (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –±—É–ª–∞ –æ–Ω–æ–≤–ª–µ–Ω–∞, –∞ —Ñ–∞–π–ª–∏ –Ω–µ –±—É–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –∑ —Å–µ—Ä–≤–µ—Ä–∞)
                        alert('–§–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –ë—É–¥—å –ª–∞—Å–∫–∞, –¥–æ–¥–∞–π—Ç–µ –π–æ–≥–æ –∑–Ω–æ–≤—É.'); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ alert –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
                    }
                });

                 // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è
                setPasswordButton.addEventListener('click', function() {
                     console.log('Set password button clicked for file:', fileNameSpan.textContent);
                     const password = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É:');
                     if (password !== null && password.trim() !== '') {
                         fileItem.password = password.trim();
                         alert('–ü–∞—Ä–æ–ª—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)!');
                         console.log('Password set (client-side simulation).');

                         // –î–æ–¥–∞—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
                         let passwordIndicator = fileInfoDiv.querySelector('.password-indicator');
                         if (!passwordIndicator) {
                             passwordIndicator = document.createElement('span');
                             passwordIndicator.classList.add('password-indicator');
                             // –î–æ–¥–∞—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ—Ä—É—á –∑ –Ω–∞–∑–≤–æ—é —Ñ–∞–π–ª—É
                             fileNameDisplay.appendChild(passwordIndicator);

                         }
                         passwordIndicator.textContent = '(–ó–∞—Ö–∏—â–µ–Ω–æ)';

                     } else {
                         fileItem.password = null;
                         alert('–ü–∞—Ä–æ–ª—å –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.');
                         console.log('Password not set or cleared.');
                          // –í–∏–¥–∞–ª—è—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä, —è–∫—â–æ –≤—ñ–Ω —î
                         const passwordIndicator = fileInfoDiv.querySelector('.password-indicator');
                         if (passwordIndicator) {
                             passwordIndicator.remove();
                         }
                     }
                });


                // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
                deleteButton.addEventListener('click', function() {
                    console.log('Delete button clicked for file:', fileNameSpan.textContent);

                    // –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
                    if (fileItem.password) {
                        const enteredPassword = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É:');
                        if (enteredPassword !== fileItem.password) {
                            alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!');
                            console.log('Incorrect password entered for delete.');
                            return; // –ó—É–ø–∏–Ω—è—î–º–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è, —è–∫—â–æ –ø–∞—Ä–æ–ª—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
                        }
                         console.log('Correct password entered. Proceeding with delete.');
                    }


                    // –ü–µ—Ä–µ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º –µ–ª–µ–º–µ–Ω—Ç–∞, –∑–≤—ñ–ª—å–Ω—è—î–º–æ URL, —è–∫—â–æ –≤—ñ–Ω –±—É–≤ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è –º–µ–¥—ñ–∞ –∞–±–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                    const previewElement = fileItem.querySelector('audio, video, img');
                    if (previewElement && previewElement.src) {
                         URL.revokeObjectURL(previewElement.src);
                         console.log('Revoked object URL for preview on delete.');
                    }

                    fileItem.remove(); // –í–∏–¥–∞–ª—è—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –∑—ñ —Å–ø–∏—Å–∫—É
                    // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É
                    console.log('Deleted file from list:', fileNameSpan.textContent);
                    // –Ø–∫—â–æ —Ñ–∞–π–ª –±—É–≤ –¥–æ–¥–∞–Ω–∏–π —É –ø–æ—Ç–æ—á–Ω—ñ–π —Å–µ—Å—ñ—ó, –º–æ–∂–ª–∏–≤–æ, –≤–∞—Ä—Ç–æ –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ URL.createObjectURL
                    // –•–æ—á–∞ revokeObjectURL –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è,
                    // —è–∫—â–æ —Ñ–∞–π–ª –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –¥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —Ü–µ —Ç–µ–∂ –º–æ–∂–µ –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–æ.
                    if (fileItem.file && fileItem.file.objectURL) {
                         URL.revokeObjectURL(item.file.objectURL);
                         console.log('Revoked object URL on delete.');
                    }
                });

                // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É
                editButton.addEventListener('click', function() {
                     console.log('Edit button clicked for file:', fileNameSpan.textContent);

                    // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
                    const renameInput = document.createElement('input');
                    renameInput.type = 'text';
                    renameInput.value = fileNameSpan.textContent;

                    const saveButton = document.createElement('button');
                    saveButton.classList.add('save-button');
                    saveButton.textContent = '–ó–±–µ—Ä–µ–≥—Ç–∏';

                    const cancelButton = document.createElement('button');
                    cancelButton.classList.add('cancel-button');
                    cancelButton.textContent = '–°–∫–∞—Å—É–≤–∞—Ç–∏';

                    const renameButtonGroup = document.createElement('div');
                    renameButtonGroup.classList.add('rename-button-group'); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó
                    renameButtonGroup.appendChild(saveButton);
                    renameButtonGroup.appendChild(cancelButton);

                    // –ó–∞–º—ñ–Ω—é—î–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥—É –≤ –º–µ–∂–∞—Ö fileInfoDiv
                    // –ù–µ –ø—Ä–∏—Ö–æ–≤—É—î–º–æ –≤—Å—é –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫, –∞ –ª–∏—à–µ –∑–∞–º—ñ–Ω—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞–∑–≤–∏
                    fileNameDisplay.replaceChild(renameInput, fileNameSpan); // –ó–∞–º—ñ–Ω—é—î–º–æ span –Ω–∞ input –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –Ω–∞–∑–≤–∏

                    // –î–æ–¥–∞—î–º–æ –Ω–æ–≤—É –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è/—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø–æ—Ä—É—á –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—é –≥—Ä—É–ø–æ—é –∫–Ω–æ–ø–æ–∫
                    // –¶–µ –º–æ–∂–µ –≤–∏–º–∞–≥–∞—Ç–∏ –≥–Ω—É—á–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è fileInfoDiv
                     fileInfoDiv.appendChild(renameButtonGroup);


                    // –§–æ–∫—É—Å—É—î–º–æ—Å—è –Ω–∞ –ø–æ–ª—ñ –≤–≤–æ–¥—É
                    renameInput.focus();

                    // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
                    saveButton.addEventListener('click', function() {
                        const newName = renameInput.value.trim();
                        if (newName && newName !== fileNameSpan.textContent) {
                            console.log('Saving new name:', newName);
                            fileNameSpan.textContent = newName;
                            // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É
                            console.log('Renamed file from', file.name, 'to', newName);
                            // –û–Ω–æ–≤–ª—é—î–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –≤ –∑–±–µ—Ä–µ–∂–µ–Ω–æ–º—É –æ–±'—î–∫—Ç—ñ File, —è–∫—â–æ —Ü–µ –º–æ–∂–ª–∏–≤–æ —ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ
                            // fileItem.file.name = newName; // –û–±'—î–∫—Ç–∏ File, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, read-only –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
                        } else {
                             console.log('Name not changed or new name is empty.');
                        }
                        // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–∞–∑–∞–¥ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É —Ç–∞ –≤–∏–¥–∞–ª—è—î–º–æ –Ω–æ–≤—É –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫
                        fileNameDisplay.replaceChild(fileNameSpan, renameInput); // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ span –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–∑–≤–∏
                        fileInfoDiv.removeChild(renameButtonGroup); // –í–∏–¥–∞–ª—è—î–º–æ –Ω–æ–≤—É –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫
                        // –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –≥—Ä—É–ø–∞ –∫–Ω–æ–ø–æ–∫ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤–∏–¥–∏–º–æ—é
                    });

                    // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
                    cancelButton.addEventListener('click', function() {
                         console.log('Renaming cancelled.');
                        // –ü—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–∞–∑–∞–¥ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É —Ç–∞ –≤–∏–¥–∞–ª—è—î–º–æ –Ω–æ–≤—É –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫
                        fileNameDisplay.replaceChild(fileNameSpan, renameInput); // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ span –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–∑–≤–∏
                        fileInfoDiv.removeChild(renameButtonGroup); // –í–∏–¥–∞–ª—è—î–º–æ –Ω–æ–≤—É –≥—Ä—É–ø—É –∫–Ω–æ–ø–æ–∫
                        // –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –≥—Ä—É–ø–∞ –∫–Ω–æ–ø–æ–∫ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤–∏–¥–∏–º–æ—é
                    });

                    // –î–æ–∑–≤–æ–ª—è—î–º–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ Enter —É –ø–æ–ª—ñ –≤–≤–æ–¥—É
                    renameInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            saveButton.click();
                        }
                    });
                });


                fileList.appendChild(fileItem);
            }

            // –û—á–∏—â–∞—î–º–æ input, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç—ñ —Å–∞–º—ñ —Ñ–∞–π–ª–∏ –∑–Ω–æ–≤—É
            fileInput.value = '';
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–ø–∫–∏ (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è)
        createFolderButton.addEventListener('click', function() {
            const folderName = prompt('–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–æ–≤–æ—ó –ø–∞–ø–∫–∏:');
            if (folderName !== null && folderName.trim() !== '') {
                console.log('Attempting to create folder (client-side simulation):', folderName);

                // –°—Ç–≤–æ—Ä—é—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –ø–∞–ø–∫–∏
                const folderItem = document.createElement('div');
                folderItem.classList.add('folder-item'); // –ö–ª–∞—Å –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó —è–∫ –ø–∞–ø–∫–∞
                folderItem.password = null; // –î–æ–¥–∞—î–º–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è –ø–∞–ø–∫–∏

                // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–∑–≤–∏ –ø–∞–ø–∫–∏ —Ç–∞ –∫–Ω–æ–ø–æ–∫
                const folderInfoDiv = document.createElement('div');
                folderInfoDiv.classList.add('folder-info');

                // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–∑–≤–∏ –ø–∞–ø–∫–∏ –∞–±–æ –ø–æ–ª—è –≤–≤–æ–¥—É
                const folderNameDisplay = document.createElement('div');
                folderNameDisplay.classList.add('folder-name-display');

                // –°—Ç–≤–æ—Ä—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –¥–ª—è –Ω–∞–∑–≤–∏ –ø–∞–ø–∫–∏
                const folderNameSpan = document.createElement('span');
                folderNameSpan.textContent = folderName.trim();
                folderNameDisplay.appendChild(folderNameSpan); // –î–æ–¥–∞—î–º–æ span –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

                const buttonGroup = document.createElement('div');
                buttonGroup.classList.add('button-group');

                // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–∞–ø–∫–∏ (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è)
                const openFolderButton = document.createElement('button');
                openFolderButton.classList.add('open-folder-button');
                openFolderButton.textContent = '–í—ñ–¥–∫—Ä–∏—Ç–∏';
                 openFolderButton.addEventListener('click', function() {
                     console.log('Open folder button clicked for folder:', folderNameSpan.textContent);

                     // –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–∞–ø–∫–∏
                     if (folderItem.password) {
                         const enteredPassword = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–∞–ø–∫–∏:');
                         if (enteredPassword !== folderItem.password) {
                             alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!');
                             console.log('Incorrect password entered for folder.');
                             return; // –ó—É–ø–∏–Ω—è—î–º–æ "–≤—ñ–¥–∫—Ä–∏—Ç—Ç—è"
                         }
                          console.log('Correct password entered. Simulating opening folder.');
                     }

                     // –Ü–º—ñ—Ç–∞—Ü—ñ—è "–≤—Ö–æ–¥—É" –≤ –ø–∞–ø–∫—É: –æ—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ —Ç–∞ –ø–æ–∫–∞–∑—É—î–º–æ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
                     fileList.innerHTML = ''; // –û—á–∏—â–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫
                     fileListHeading.textContent = '–í–º—ñ—Å—Ç –ø–∞–ø–∫–∏: ' + folderNameSpan.textContent; // –ó–º—ñ–Ω—é—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫
                     backButton.style.display = 'block'; // –ü–æ–∫–∞–∑—É—î–º–æ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
                     // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–º—ñ—Å—Ç –ø–∞–ø–∫–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞
                     alert('–Ü–º—ñ—Ç–∞—Ü—ñ—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–∞–ø–∫–∏. –í–º—ñ—Å—Ç –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (–ø–æ—Ç—Ä—ñ–±–µ–Ω —Å–µ—Ä–≤–µ—Ä).');
                 });

                 const renameFolderButton = document.createElement('button');
                 renameFolderButton.classList.add('rename-folder-button');
                 renameFolderButton.textContent = '–ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏';
                  renameFolderButton.addEventListener('click', function() {
                       console.log('Rename folder button clicked for folder:', folderNameSpan.textContent);
                      const newFolderName = prompt('–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤—É –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏:', folderNameSpan.textContent);
                      if (newFolderName !== null && newFolderName.trim() !== '') {
                          folderNameSpan.textContent = newFolderName.trim();
                          alert('–ü–∞–ø–∫—É –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ (–≤—ñ–∑—É–∞–ª—å–Ω–æ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)!');
                          console.log('Folder renamed (client-side simulation):', newFolderName.trim());
                      } else {
                           alert('–ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ.');
                           console.log('Folder rename cancelled.');
                      }
                  });


                const deleteFolderButton = document.createElement('button');
                deleteFolderButton.classList.add('delete-folder-button');
                deleteFolderButton.textContent = '–í–∏–¥–∞–ª–∏—Ç–∏';
                 deleteFolderButton.addEventListener('click', function() {
                      console.log('Delete folder button clicked for folder:', folderNameSpan.textContent);

                     // –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–∞–ø–∫–∏
                     if (folderItem.password) {
                        const enteredPassword = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–∞–ø–∫–∏:');
                        if (enteredPassword !== folderItem.password) {
                            alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!');
                            console.log('Incorrect password entered for folder deletion.');
                            return; // –ó—É–ø–∏–Ω—è—î–º–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
                        }
                         console.log('Correct password entered. Simulating deleting folder.');
                     }


                     const confirmDelete = confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–∞–ø–∫—É "' + folderNameSpan.textContent + '"?');
                     if (confirmDelete) {
                         folderItem.remove(); // –í–∏–¥–∞–ª—è—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –ø–∞–ø–∫–∏
                         alert('–ü–∞–ø–∫—É –≤–∏–¥–∞–ª–µ–Ω–æ (–≤—ñ–∑—É–∞–ª—å–Ω–æ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)!');
                         console.log('Folder deleted (client-side simulation):', folderNameSpan.textContent);
                     } else {
                          console.log('Folder deletion cancelled.');
                     }
                 });

                 const setFolderPasswordButton = document.createElement('button');
                 setFolderPasswordButton.classList.add('set-folder-password-button');
                 setFolderPasswordButton.textContent = '–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å';
                  setFolderPasswordButton.addEventListener('click', function() {
                       console.log('Set password button clicked for folder:', folderNameSpan.textContent);
                      const password = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è —Ü—ñ—î—ó –ø–∞–ø–∫–∏:');
                      if (password !== null && password.trim() !== '') {
                          folderItem.password = password.trim();
                          alert('–ü–∞—Ä–æ–ª—å –ø–∞–ø–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)!');
                          console.log('Folder password set (client-side simulation).');
                           // –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–∞–ø–∫–∏, —è–∫ –¥–ª—è —Ñ–∞–π–ª—ñ–≤
                      } else {
                          folderItem.password = null;
                          alert('–ü–∞—Ä–æ–ª—å –ø–∞–ø–∫–∏ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.');
                          console.log('Folder password not set or cleared.');
                      }
                  });


                buttonGroup.appendChild(openFolderButton);
                buttonGroup.appendChild(renameFolderButton);
                buttonGroup.appendChild(deleteFolderButton);
                buttonGroup.appendChild(setFolderPasswordButton); // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è –ø–∞–ø–∫–∏


                folderInfoDiv.appendChild(folderNameDisplay);
                folderInfoDiv.appendChild(buttonGroup);

                folderItem.appendChild(folderInfoDiv);

                fileList.appendChild(folderItem); // –î–æ–¥–∞—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –ø–∞–ø–∫–∏ –¥–æ —Å–ø–∏—Å–∫—É

                alert('–ü–∞–ø–∫—É "' + folderName.trim() + '" —Å—Ç–≤–æ—Ä–µ–Ω–æ (–≤—ñ–∑—É–∞–ª—å–Ω–æ –Ω–∞ —Ü—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ).');
                console.log('Folder created (client-side simulation):', folderName.trim());

            } else {
                alert('–ù–∞–∑–≤–∞ –ø–∞–ø–∫–∏ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—å–æ—é.');
                 console.log('Folder creation cancelled - empty name.');
            }
        });


        // –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —ñ–º—ñ—Ç–∞—Ü—ñ—è)
        backButton.addEventListener('click', function() {
             console.log('Back button clicked. Simulating returning to previous folder.');
             // –Ü–º—ñ—Ç–∞—Ü—ñ—è "–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è": –æ—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –≤–∏–≥–ª—è–¥
             fileList.innerHTML = ''; // –û—á–∏—â–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫
             fileListHeading.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏:'; // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
             backButton.style.display = 'none'; // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
             // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–º—ñ—Å—Ç –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –ø–∞–ø–∫–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞
             alert('–Ü–º—ñ—Ç–∞—Ü—ñ—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞–∑–∞–¥. –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–º—ñ—Å—Ç –Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ (–ø–æ—Ç—Ä—ñ–±–µ–Ω —Å–µ—Ä–≤–µ—Ä).');
        });


        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∂–∏–º—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
        toggleEditButton.addEventListener('click', function() {
            isEditingMode = !isEditingMode; // –ü–µ—Ä–µ–º–∏–∫–∞—î–º–æ —Ñ–ª–∞–≥

            if (isEditingMode) {
                toggleEditButton.textContent = '–í–∏–º–∫–Ω—É—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É';
                // –†–æ–±–∏–º–æ –≤–∏–±—Ä–∞–Ω—ñ —Ç–µ–∫—Å—Ç–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏–º–∏
                editableTextElements.forEach(element => {
                    element.contentEditable = 'true';
                });
                 alert('–†–µ–∂–∏–º —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É —É–≤—ñ–º–∫–Ω–µ–Ω–æ. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —Ç–µ–∫—Å—Ç, —â–æ–± —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏.');
            } else {
                toggleEditButton.textContent = '–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É';
                 // –í–∏–º–∏–∫–∞—î–º–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤–∏–±—Ä–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
                editableTextElements.forEach(element => {
                    element.contentEditable = 'false';
                });
                 alert('–†–µ–∂–∏–º —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –≤–∏–º–∫–Ω–µ–Ω–æ. –ó–º—ñ–Ω–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è!');
            }
        });

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ —Ñ–æ–∫—É—Å–∞ –∞–±–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ Enter
        editableTextElements.forEach(element => {
            element.addEventListener('blur', function() {
                // –ó–º—ñ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ —Ñ–æ–∫—É—Å–∞ –∑–∞–≤–¥—è–∫–∏ contenteditable
                console.log('Text edited:', element.textContent);
                // –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É —Ç—É—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–º—ñ–Ω–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            });

            element.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault(); // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫
                    element.blur(); // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∑–º—ñ–Ω–∏, —ñ–º—ñ—Ç—É—é—á–∏ –≤—Ç—Ä–∞—Ç—É —Ñ–æ–∫—É—Å–∞
                }
            });
        });

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó beforeunload –¥–ª—è –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö Object URL –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        window.addEventListener('beforeunload', function() {
            console.log('Page is unloading, revoking all Object URLs.');
            // –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—è –ø–æ –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç–∞—Ö —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª—ñ–≤
            fileList.querySelectorAll('.file-item').forEach(item => {
                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –º–µ–¥—ñ–∞ –µ–ª–µ–º–µ–Ω—Ç –∞–±–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ —á–∏ –º–∞—î –≤—ñ–Ω src
                const previewElement = item.querySelector('audio, video, img');
                if (previewElement && previewElement.src) {
                    URL.revokeObjectURL(previewElement.src);
                    console.log('Revoked Object URL for preview:', previewElement.src);
                }
                 // –ü—Ä–∏–º—ñ—Ç–∫–∞: Object URL –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ setTimeout –ø—ñ—Å–ª—è –∫–ª—ñ–∫—É
                 // –¶–µ –¥–æ–¥–∞—Ç–∫–æ–≤–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —î "—Å—Ç—Ä–∞—Ö–æ–≤–∫–æ—é".
            });
        });

    </script>
</body>
</html>
